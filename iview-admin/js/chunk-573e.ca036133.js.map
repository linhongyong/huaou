{"version":3,"sources":["webpack:///./src/libs/mytools.js","webpack:///./src/view/login/login.vue?9014","webpack:///./src/view/login/login.vue?e2f2","webpack:///./src/view/login/login.vue?3091","webpack:///./src/components/login-form/login-form.vue?03d6","webpack:///src/components/login-form/login-form.vue","webpack:///./src/components/login-form/login-form.vue?bebf","webpack:///./src/components/login-form/login-form.vue","webpack:///./src/components/login-form/index.js","webpack:///src/view/login/login.vue","webpack:///./src/view/login/login.vue?5c89","webpack:///./src/view/login/login.vue"],"names":["machiningFromTwoTree","nodes","ownerMenus","result","traverse","forEach","node","index","j","length","meta","title","menuName","hideInMenu","children","childMenus","push","getTreeFromTreeByValue","prop","value","i","getArrayFromTreeByValue","getStrArrayFromBigArray","arr","reduce","prev","cur","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_1_lang_css___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","icon","bordered","on","on-success-valid","handleSubmit","_v","staticRenderFns","login_formvue_type_template_id_90b9978a_render","ref","model","form","rules","nativeOn","keydown","$event","_k","keyCode","key","placeholder","callback","$$v","$set","expression","slot","size","type","long","click","login_formvue_type_template_id_90b9978a_staticRenderFns","login_formvue_type_script_lang_js_","name","props","userNameRules","Array","default","required","message","trigger","passwordRules","data","userName","password","computed","methods","_this","$refs","loginForm","validate","valid","$emit","login_form_login_formvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","login_form","components_login_form","loginvue_type_script_lang_js_","components","LoginForm","objectSpread","vuex_esm","_ref","handleLogin","then","res","$Message","success","getUserInfo","console","log","$router","routes","buttonList","mytools","JSON","parse","stringify","setButtonList","localStorage","setItem","originMenutree","menutree","util","setMenuList","catch","err","error","login_loginvue_type_script_lang_js_","login_component","__webpack_exports__"],"mappings":"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","file":"js/chunk-573e.ca036133.js","sourcesContent":["/**\r\n * 通过一个树加工过滤出另一个树\r\n */\r\nexport const machiningFromTwoTree  = (nodes, ownerMenus)=> {\r\n\tlet result = [];\r\n\t(function traverse(nodes, ownerMenus, result) {\r\n\t\tnodes.forEach((node, index) => {\r\n\t\t\tfor(let j=0; j<ownerMenus.length; j++){\r\n\t\t\t\t// console.log(\"------\", node.meta.title, ownerMenus[j].menuName)\r\n\t\t\t\tif(node.meta.title == ownerMenus[j].menuName){\r\n\t\t\t\t\t// console.log(node)\r\n\t\t\t\t\t// console.log(ownerMenus[j])\r\n\t\t\t\t\tnode.meta.hideInMenu = false\r\n\t\t\t\t\tif(node.children){\r\n\t\t\t\t\t\tlet children = node.children;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tnode.children = []\r\n\t\t\t\t\t\ttraverse(children, ownerMenus[j].childMenus, node.children)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresult.push(node);\r\n\t\t\t\r\n\t\t})//遍历结束\r\n\t})(nodes, ownerMenus, result);\r\n\treturn result;\r\n}\r\n/**\r\n * 通过字段的值过滤出新树\r\n */\r\nexport const getTreeFromTreeByValue  = (nodes, prop, value)=> {\r\n\tlet result = [];\r\n\t(function traverse(nodes, result) {\r\n\t\tnodes.forEach((node, i) => {\r\n\t\t\t// console.log(node[prop] , value);\r\n\t\t\tif(node[prop] == value){\r\n\t\t\t\tresult.push(node)\r\n\t\t\t}\r\n\t\t\tif(node.childMenus && node.childMenus.length){\r\n\t\t\t\tlet children = node.childMenus;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\tresult[i].childMenus = []\r\n\t\t\t\ttraverse(children, result[i].childMenus)\r\n\t\t\t}\r\n\t\t})//遍历结束\r\n\t})(nodes, result);\r\n\treturn result;\r\n}\r\n/**\r\n * 通过字段的值过滤出数组\r\n */\r\nexport const getArrayFromTreeByValue  = (nodes, prop, value)=> {\r\n\tlet result = [];\r\n\t(function traverse(nodes) {\r\n\t\tnodes.forEach((node, i) => {\r\n\t\t\t// console.log(node[prop] , value);\r\n\t\t\tif(node[prop] == value){\r\n\t\t\t\tresult.push(node)\r\n\t\t\t}\r\n\t\t\tif(node.childMenus && node.childMenus.length){\r\n\t\t\t\ttraverse(node.childMenus)\r\n\t\t\t}\r\n\t\t})//遍历结束\r\n\t})(nodes);\r\n\treturn result;\r\n}\r\n/**\r\n * 判断用户是否拥有此按钮权限\r\n */\r\nexport const isAccessForButton  = (code)=> {\r\n\tlet buttons = this.$store.user.buttonList\r\n\tfor(let i=0; i<buttons.length; i++){\r\n\t\tif(buttons[i].url == code){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n/**\r\n * 将数组中连续的部分和不连续的分段\r\n */\r\nexport const getStrArrayFromBigArray  = (arr)=> {\r\n\tif (!arr || !arr.length) {\r\n\t\treturn []\r\n\t}\r\n\tvar result = [],\r\n      i = 0;\r\n  result[i] = [arr[0]];\r\n  arr.reduce(function(prev, cur){\r\n    cur-prev === 1 ? result[i].push(cur) : result[++i] = [cur];\r\n    return cur;\r\n  });\r\n  return result;\r\n}\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=1&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('div',{staticClass:\"login-con\"},[_c('Card',{attrs:{\"icon\":\"log-in\",\"title\":\"欢迎登录\",\"bordered\":false}},[_c('div',{staticClass:\"form-con\"},[_c('login-form',{on:{\"on-success-valid\":_vm.handleSubmit}}),_c('p',{staticClass:\"login-tip\"},[_vm._v(\"输入任意用户名和密码即可\")])],1)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Form',{ref:\"loginForm\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules},nativeOn:{\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleSubmit($event)}}},[_c('FormItem',{attrs:{\"prop\":\"userName\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入用户名\"},model:{value:(_vm.form.userName),callback:function ($$v) {_vm.$set(_vm.form, \"userName\", $$v)},expression:\"form.userName\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_c('Icon',{attrs:{\"size\":16,\"type\":\"ios-person\"}})],1)])],1),_c('FormItem',{attrs:{\"prop\":\"password\"}},[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_c('Icon',{attrs:{\"size\":14,\"type\":\"md-lock\"}})],1)])],1),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\",\"long\":\"\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"登录\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Form ref=\"loginForm\" :model=\"form\" :rules=\"rules\" @keydown.enter.native=\"handleSubmit\">\n    <FormItem prop=\"userName\">\n      <Input v-model=\"form.userName\" placeholder=\"请输入用户名\">\n        <span slot=\"prepend\">\n          <Icon :size=\"16\" type=\"ios-person\"></Icon>\n        </span>\n      </Input>\n    </FormItem>\n    <FormItem prop=\"password\">\n      <Input type=\"password\" v-model=\"form.password\" placeholder=\"请输入密码\">\n        <span slot=\"prepend\">\n          <Icon :size=\"14\" type=\"md-lock\"></Icon>\n        </span>\n      </Input>\n    </FormItem>\n    <FormItem>\n      <Button @click=\"handleSubmit\" type=\"primary\" long>登录</Button>\n    </FormItem>\n  </Form>\n</template>\n<script>\nexport default {\n  name: 'LoginForm',\n  props: {\n    userNameRules: {\n      type: Array,\n      default: () => {\n        return [\n          { required: true, message: '账号不能为空', trigger: 'blur' }\n        ]\n      }\n    },\n    passwordRules: {\n      type: Array,\n      default: () => {\n        return [\n          { required: true, message: '密码不能为空', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  data () {\n    return {\n      form: {\n        userName: '13459024699',\n        password: '654321'\n      }\n    }\n  },\n  computed: {\n    rules () {\n      return {\n        userName: this.userNameRules,\n        password: this.passwordRules\n      }\n    }\n  },\n  methods: {\n    handleSubmit () {\n      this.$refs.loginForm.validate((valid) => {\n        if (valid) {\n          this.$emit('on-success-valid', {\n            userName: this.form.userName,\n            password: this.form.password\n          })\n        }\n      })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login-form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login-form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login-form.vue?vue&type=template&id=90b9978a&\"\nimport script from \"./login-form.vue?vue&type=script&lang=js&\"\nexport * from \"./login-form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"login-form.vue\"\nexport default component.exports","import LoginForm from './login-form.vue';\nexport default LoginForm;","<style lang=\"less\">\n@import \"./login.less\";\n</style>\n\n<template>\n  <div class=\"login\">\n    <div class=\"login-con\">\n      <Card icon=\"log-in\" title=\"欢迎登录\" :bordered=\"false\">\n        <div class=\"form-con\">\n          <login-form @on-success-valid=\"handleSubmit\"></login-form>\n          <p class=\"login-tip\">输入任意用户名和密码即可</p>\n        </div>\n      </Card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport LoginForm from \"_c/login-form\";\nimport { mapActions, mapMutations } from \"vuex\";\nimport userApi from '@/api/user-api'\r\nimport { getMenuByRouter } from '@/libs/util'\r\nimport { machiningFromTwoTree, getTreeFromTreeByValue, getArrayFromTreeByValue } from '@/libs/mytools'\nexport default {\n\t\tcomponents: {\n\t\t\t\tLoginForm\n\t\t},\n\t\tmethods: {\n\t\t\t\t...mapActions([\"handleLogin\", \"getUserInfo\"]),\r\n\t\t\t\t...mapMutations([\"setMenuList\", \"setButtonList\"]),\n\t\t\t\thandleSubmit({ userName, password }) {\n\t\t\t\t\t\tthis.handleLogin({ userName, password })\n\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\tthis.$Message.success(\"登录成功\");\n\t\t\t\t\t\t\t\tthis.getUserInfo().then(ownerMenus => {\n\t\t\t\t\t\t\t\t\t\tconsole.log(ownerMenus);\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(this.$router.options.routes);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t//获得用户拥有的按钮数组\r\n\t\t\t\t\t\t\t\t\t\tlet buttonList = getArrayFromTreeByValue(JSON.parse(JSON.stringify(ownerMenus)), \"type\", 1);\r\n\t\t\t\t\t\t\t\t\t\tthis.setButtonList(buttonList);//保存到全局\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem(\"buttonList\",JSON.stringify(buttonList))\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(buttonList);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t// 把菜单中的按钮过滤掉\r\n\t\t\t\t\t\t\t\t\t\tlet originMenutree = getTreeFromTreeByValue(JSON.parse(JSON.stringify(ownerMenus)), \"type\", 0);\r\n\t\t\t\t\t\t\t\t\t\t//用本地的路由配置和服务端菜单树生成菜单树\r\n\t\t\t\t\t\t\t\t\t\toriginMenutree = machiningFromTwoTree(this.$router.options.routes, originMenutree)\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t//最后生成可以显示的菜单\r\n\t\t\t\t\t\t\t\t\t\tlet menutree = getMenuByRouter(originMenutree)\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem(\"menuList\",JSON.stringify(menutree))\r\n\t\t\t\t\t\t\t\t\t\tthis.setMenuList(menutree);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t//显示首页\r\n\t\t\t\t\t\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\t\t\t\t\t\tname: \"home\"\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\tthis.$Message.error(err.message);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t}\n};\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=6c28d63a&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=less&\"\nimport style1 from \"./login.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"login.vue\"\nexport default component.exports"],"sourceRoot":""}