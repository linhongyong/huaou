(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-670b"],{"0532":function(t,e,n){"use strict";var a=n("b5ab"),o=n.n(a);o.a},"779d":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("Card",[n("Row",{attrs:{type:"flex",justify:"space-between"}},[n("Col",{attrs:{span:"6"}},[n("div",{staticClass:"el-tree"},[n("div",{staticStyle:{"margin-bottom":"35px"}},[n("Button",{attrs:{type:"primary",icon:"md-add",size:"small"},on:{click:function(e){t.addMenu()}}},[t._v("添加")]),n("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"error",icon:"md-trash",size:"small",disabled:!t.isAccessForButton("0020")},on:{click:function(e){t.deleteMenu()}}},[t._v("删除")])],1),n("Tree",{attrs:{data:t.menutree},on:{"on-select-change":t.getRoleDetail}})],1)]),n("Col",{attrs:{span:"17"}},[n("Card",[n("div",{staticStyle:{padding:"20px 20px 80px"}},[t.menutree.length?n("span",[t._v("父级：")]):t._e(),t.menutree.length?n("Dropdown",{on:{"on-click":t.onSelectParent}},[n("a",{staticClass:"dropdown display-flex-center-between",attrs:{href:"javascript:void(0)"}},[t._v("\n                    "+t._s(t.obj.parentName?t.obj.parentName:"请选择父级")+"\n                    "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(t.menutree,function(e){return n("div",{key:e.id},[e.children.length?n("Dropdown",{attrs:{placement:"right-start"}},[n("DropdownItem",{attrs:{name:e.id+"-"+e.menuName}},[t._v("\n                        "+t._s(e.title)+"\n                        "),n("Icon",{attrs:{type:"ios-arrow-forward"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(e.children,function(e){return n("div",{key:e.id},[e.children.length?n("Dropdown",{attrs:{placement:"right-start"}},[n("DropdownItem",{attrs:{name:e.id+"-"+e.menuName}},[t._v("\n                              "+t._s(e.title)+"\n                              "),n("Icon",{attrs:{type:"ios-arrow-forward"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(e.children,function(e){return n("DropdownItem",{key:e.id+"-"+e.menuName,attrs:{name:e.id+"-"+e.menuName}},[t._v(t._s(e.title))])}))],1):n("DropdownItem",{attrs:{name:e.id+"-"+e.menuName}},[t._v(t._s(e.title))])],1)}))],1):n("DropdownItem",{staticStyle:{padding:"5px 20px"},attrs:{name:e.id+"-"+e.menuName}},[t._v(t._s(e.title))])],1)}))],1):t._e(),n("div",{staticStyle:{"margin-top":"40px"}},[t._v("\n                             名称：\n                "),n("Input",{staticStyle:{width:"80%"},attrs:{placeholder:""},model:{value:t.obj.menuName,callback:function(e){t.$set(t.obj,"menuName",e)},expression:"obj.menuName"}})],1),n("div",{staticStyle:{"margin-top":"40px"}},[t._v("\n                              代码：\n                "),n("Input",{staticStyle:{width:"80%"},attrs:{placeholder:""},model:{value:t.obj.url,callback:function(e){t.$set(t.obj,"url",e)},expression:"obj.url"}})],1),n("div",{staticStyle:{"margin-top":"40px"}},[t._v("\n                            类型：\n              \t"),n("RadioGroup",{model:{value:t.obj.type,callback:function(e){t.$set(t.obj,"type",e)},expression:"obj.type"}},[n("Radio",{attrs:{label:"0"}},[n("span",[t._v("菜单")])]),n("Radio",{attrs:{label:"1"}},[n("span",[t._v("按钮")])])],1)],1),n("div",{staticClass:"display-flex-center",staticStyle:{"margin-top":"40px"}},[t._v("\n                              序号：\n                 "),n("div",{staticStyle:{width:"80%","padding-left":"10px"}},[n("Slider",{model:{value:t.obj.orderNum,callback:function(e){t.$set(t.obj,"orderNum",e)},expression:"obj.orderNum"}})],1)]),n("div",{staticStyle:{"margin-top":"40px"}},[t._v("\n                              备注：\n                "),n("Input",{staticStyle:{width:"80%"},attrs:{placeholder:""},model:{value:t.obj.perms,callback:function(e){t.$set(t.obj,"perms",e)},expression:"obj.perms"}})],1)],1),n("div",{staticStyle:{"text-align":"right",padding:"30px 10px 10px"}},[n("Button",{attrs:{type:"primary",disabled:!t.isAccessForButton("0019")},on:{click:function(e){t.handleSubmit()}}},[t._v("保存")])],1)])],1)],1)],1)],1)},o=[],s=(n("ac6a"),n("28a5"),n("9e77")),i=function(){return{icon:"+",parentId:null,parentName:null,type:"0"}},r={data:function(){return{menutree:[],obj:i()}},methods:{getCheckedBoxs:function(t){console.log(t),this.checkedBoxs=t},addMenu:function(){this.obj={icon:"+",parentId:null}},deleteMenu:function(){var t=this,e=this.obj.id;s["a"].deleteById({id:e}).then(function(){t.$Message.success("操作成功"),t.obj=i(),t.getMenus()})},onSelectParent:function(t){console.log(t),this.obj.parentId=t.split("-")[0],this.obj.parentName=t.split("-")[1]},handleSubmit:function(){var t=this;console.log(this.obj),this.obj.menuName&&this.obj.perms&&this.obj.url?this.obj.id?s["a"].updateMenu(this.obj).then(function(e){console.log(e),t.$Message.success("操作成功"),t.getMenus(),t.obj=i()}).catch(function(e){console.log(e.message),t.$Message.error(e.message)}):s["a"].addMenu(this.obj).then(function(e){console.log(e),t.$Message.success("操作成功"),t.getMenus(),t.obj=i()}).catch(function(e){console.log(e.message),t.$Message.error(e.message)}):this.$Message.error("缺少参数")},getRoleDetail:function(t){console.log(t),this.obj.id=t[0].id,this.obj.parentId=t[0].parentId,this.obj.menuName=t[0].menuName,this.obj.url=t[0].url,this.obj.type=t[0].type,this.obj.perms=t[0].perms},getMenus:function(){var t=this;s["a"].getMenus(null,function(e){console.log(e),t.menuList=e.result.list,t.machiningMenus(e.result.list)})},machiningMenus:function(t){var e=[];(function t(e,n){e.forEach(function(e){var a=e;1==e.type?a.title="".concat(e.menuName,"(").concat(e.url,")"):a.title=e.menuName,a.expand=!0,e.childMenus&&(a.children=[],t(e.childMenus,a.children)),n.push(a)})})(t,e),this.menutree=e}},mounted:function(){this.getMenus()}},u=r,l=(n("0532"),n("2877")),d=Object(l["a"])(u,a,o,!1,null,null,null);d.options.__file="menu.vue";e["default"]=d.exports},"9e77":function(t,e,n){"use strict";var a=n("66df"),o=n("a93f"),s=new Object;s.addMenu=function(t){return new Promise(function(e,n){a["a"].request({url:"/menu/add",method:"post",data:t}).then(function(t){"Success"==t.data.code?e(t.data):n(t.data)})})},s.deleteMenu=function(t,e,n){a["a"].request({url:"/menu/delete?id=".concat(t.id),method:"post"}).then(function(t){console.log(t),"Success"!=t.data.code?n(t.data):e(t.data)})},s.updateMenu=function(t,e,n){a["a"].request({url:"/menu/update",method:"post",data:t}).then(function(t){console.log(t),"Success"!=t.data.code?n(t.data):e(t.data)})},s.getMenus=function(t,e,n){a["a"].request({url:"/menu/list",method:"post"}).then(function(t){"Success"!=t.data.code?n(t.data):e(t.data)})},s.addMenu=function(t){return o["a"].post({url:"/menu/add",data:t})},s.updateMenu=function(t){return o["a"].post({url:"/menu/update",data:t})},s.getMenuList=function(t){return o["a"].post({url:"/menu/list",data:t})},s.getMenusByRoleId=function(t){return o["a"].get({url:"/roleMenu/getMenusByRoleId",data:t})},s.getMenusByParentId=function(t){return o["a"].get({url:"/menu/getMenusByParentId",data:t})},s.getMenuTreeByUserId=function(t){return o["a"].get({url:"/menuTree/getByUserId",data:t,defaultValue:"menuList"})},s.deleteById=function(t){return o["a"].post({url:"/menu/delete?id=".concat(t.id),data:t})},s.getMenusLevel1=function(t,e,n){a["a"].request({url:"/menu/getMenusByParentId?parentId=0",method:"get"}).then(function(t){"Success"!=t.data.code?n(t.data):e(t.data)})},e["a"]=s},b5ab:function(t,e,n){}}]);
//# sourceMappingURL=chunk-670b.d1aaffe8.js.map