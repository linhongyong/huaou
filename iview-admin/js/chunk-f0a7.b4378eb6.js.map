{"version":3,"sources":["webpack:///./src/libs/mytools.js","webpack:///./src/view/login/login.vue?9014","webpack:///./src/mixin/mixin-project-building.js","webpack:///./src/view/login/login.vue?e2f2","webpack:///./src/view/login/login.vue?b8cc","webpack:///./src/components/login-form/login-form.vue?e96f","webpack:///src/components/login-form/login-form.vue","webpack:///./src/components/login-form/login-form.vue?bebf","webpack:///./src/components/login-form/login-form.vue","webpack:///./src/components/login-form/index.js","webpack:///src/view/login/login.vue","webpack:///./src/view/login/login.vue?5c89","webpack:///./src/view/login/login.vue"],"names":["machiningFromTwoTree","nodes","ownerMenus","result","traverse","forEach","node","index","j","length","meta","title","menuName","hideInMenu","children","childMenus","push","getTreeFromTreeByValue","prop","value","i","getArrayFromTreeByValue","getStrArrayFromBigArray","arr","reduce","prev","cur","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","__webpack_exports__","computed","watch","methods","Object","F_huaou_iview_admin_admin_huaou_huaou_node_modules_babel_runtime_helpers_builtin_es6_objectSpread__WEBPACK_IMPORTED_MODULE_1__","vuex__WEBPACK_IMPORTED_MODULE_5__","getRoles","_this","this","_api_user_api__WEBPACK_IMPORTED_MODULE_6__","then","roles","setRoles","isCanSeeAllProject","localStorage","setItem","JSON","stringify","item","roleName","setIsCanSeeAllProject","console","log","getProjectList","getJoinedList","_this2","_api_project_api__WEBPACK_IMPORTED_MODULE_7__","data","setProjects","setProject","catch","err","$Message","error","_this3","getBuildList","projectId","_this4","setBuildings","setBuilding","created","getItem","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_1_lang_css___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","icon","bordered","staticStyle","font-size","_v","on","on-success-valid","handleSubmit","staticRenderFns","login_formvue_type_template_id_2263c0f4_render","ref","model","form","rules","nativeOn","keydown","$event","_k","keyCode","key","placeholder","callback","$$v","$set","expression","slot","size","type","long","click","login_formvue_type_template_id_2263c0f4_staticRenderFns","login_formvue_type_script_lang_js_","name","props","userNameRules","Array","default","required","message","trigger","passwordRules","userName","password","$refs","loginForm","validate","valid","$emit","login_form_login_formvue_type_script_lang_js_","component","componentNormalizer","options","__file","login_form","components_login_form","loginvue_type_script_lang_js_","mixins","mixin_project_building","components","LoginForm","objectSpread","vuex_esm","_ref","handleLogin","res","success","getUserInfo","buttonList","mytools","parse","setButtonList","originMenutree","$router","routes","menutree","util","setMenuList","login_loginvue_type_script_lang_js_","login_component"],"mappings":"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","file":"js/chunk-f0a7.b4378eb6.js","sourcesContent":["/**\r\n * 通过一个树加工过滤出另一个树\r\n */\r\nexport const machiningFromTwoTree  = (nodes, ownerMenus)=> {\r\n\tlet result = [];\r\n\t(function traverse(nodes, ownerMenus, result) {\r\n\t\tnodes.forEach((node, index) => {\r\n\t\t\tfor(let j=0; j<ownerMenus.length; j++){\r\n\t\t\t\t// console.log(\"------\", node.meta.title, ownerMenus[j].menuName)\r\n\t\t\t\tif(node.meta.title == ownerMenus[j].menuName){\r\n\t\t\t\t\t// console.log(node)\r\n\t\t\t\t\t// console.log(ownerMenus[j])\r\n\t\t\t\t\tnode.meta.hideInMenu = false\r\n\t\t\t\t\tif(node.children){\r\n\t\t\t\t\t\tlet children = node.children;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tnode.children = []\r\n\t\t\t\t\t\ttraverse(children, ownerMenus[j].childMenus, node.children)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresult.push(node);\r\n\t\t\t\r\n\t\t})//遍历结束\r\n\t})(nodes, ownerMenus, result);\r\n\treturn result;\r\n}\r\n/**\r\n * 通过字段的值过滤出新树\r\n */\r\nexport const getTreeFromTreeByValue  = (nodes, prop, value)=> {\r\n\tlet result = [];\r\n\t(function traverse(nodes, result) {\r\n\t\tnodes.forEach((node, i) => {\r\n\t\t\t// console.log(node[prop] , value);\r\n\t\t\tif(node[prop] == value){\r\n\t\t\t\tresult.push(node)\r\n\t\t\t}\r\n\t\t\tif(node.childMenus && node.childMenus.length){\r\n\t\t\t\tlet children = node.childMenus;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\tresult[i].childMenus = []\r\n\t\t\t\ttraverse(children, result[i].childMenus)\r\n\t\t\t}\r\n\t\t})//遍历结束\r\n\t})(nodes, result);\r\n\treturn result;\r\n}\r\n/**\r\n * 通过字段的值过滤出数组\r\n */\r\nexport const getArrayFromTreeByValue  = (nodes, prop, value)=> {\r\n\tlet result = [];\r\n\t(function traverse(nodes) {\r\n\t\tnodes.forEach((node, i) => {\r\n\t\t\t// console.log(node[prop] , value);\r\n\t\t\tif(node[prop] == value){\r\n\t\t\t\tresult.push(node)\r\n\t\t\t}\r\n\t\t\tif(node.childMenus && node.childMenus.length){\r\n\t\t\t\ttraverse(node.childMenus)\r\n\t\t\t}\r\n\t\t})//遍历结束\r\n\t})(nodes);\r\n\treturn result;\r\n}\r\n/**\r\n * 判断用户是否拥有此按钮权限\r\n */\r\nexport const isAccessForButton  = (code)=> {\r\n\tlet buttons = this.$store.user.buttonList\r\n\tfor(let i=0; i<buttons.length; i++){\r\n\t\tif(buttons[i].url == code){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n/**\r\n * 将数组中连续的部分和不连续的分段\r\n */\r\nexport const getStrArrayFromBigArray  = (arr)=> {\r\n\tif (!arr || !arr.length) {\r\n\t\treturn []\r\n\t}\r\n\tvar result = [],\r\n      i = 0;\r\n  result[i] = [arr[0]];\r\n  arr.reduce(function(prev, cur){\r\n    cur-prev === 1 ? result[i].push(cur) : result[++i] = [cur];\r\n    return cur;\r\n  });\r\n  return result;\r\n}\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&lang=less&\"","/**使用：\r\n * 1.登录时初始化项目楼栋数据\r\n * 2.新增项目时\r\n */\r\nimport { mapActions, mapMutations } from \"vuex\";\r\nimport userApi from '@/api/user-api'\r\nimport projectApi from '@/api/project-api'\r\n\nexport default {\n  computed: {\n\n  },\n  watch: {\n\n  },\r\n  methods:{\r\n\t  ...mapMutations([\"setMenuList\", \"setButtonList\",\"setBuildings\",\r\n\t  \"setRoles\", \"setProjects\", \"setProject\", \"setBuilding\", \"setIsCanSeeAllProject\" ]),\r\n\t\t/**\r\n\t\t* \r\n\t\t* 获得用户拥有的角色\r\n\t\t* 并存入localStorage、更新vuex中的roles\r\n\t\t* 调用getProjectList或getJoinedList方法\r\n\t\t*/\r\n\t  getRoles() {\r\n\t  \tuserApi\r\n\t  \t\t.getRoles()\r\n\t  \t\t.then(roles => {\r\n\t  \t\t\tthis.setRoles(roles);//1.保存到全局\r\n\t  \t\t\tlet isCanSeeAllProject = false;\r\n\t  \t\t\tlocalStorage.setItem(\"roles\",JSON.stringify(roles))\r\n\t  \t\t\troles.forEach(function (item) {\r\n\t  \t\t\t\tif (item.roleName == '老板' || item.roleName == '管理员' || item.roleName == '系统管理员' || item.roleName == '超级系统管理员') {\r\n\t\t\t\t\t\t\tthis.setIsCanSeeAllProject(true)\r\n\t  \t\t\t\t\tisCanSeeAllProject = true\r\n\t\t\t\t\t\t\tlocalStorage.setItem(\"isCanSeeAllProject\", true)\r\n\t  \t\t\t\t}\r\n\t  \t\t\t}, this)\r\n\t  \t\t\tif (isCanSeeAllProject) {\r\n\t  \t\t\t\tconsole.log(\"获得所有项目\");\r\n\t  \t\t\t\tthis.getProjectList();\r\n\t  \t\t\t} else{\r\n\t  \t\t\t\tconsole.log(\"获得参与项目\");\r\n\t  \t\t\t\tthis.getJoinedList();\r\n\t  \t\t\t}\r\n\t  \t\t\t\r\n\t  \t\t})\r\n// \t  \t\t.catch(err => {\r\n// \t  \t\t\tthis.$Message.error(\"获取职务列表失败\");\r\n// \t  \t\t});\r\n\t  },\r\n\t\t/**\r\n\t\t* \r\n\t\t* 获得所有项目\r\n\t\t* 并存入localStorage、更新vuex中的projects和project\r\n\t\t* 调用getBuildList方法\r\n\t\t*/\r\n\t  getProjectList() {\r\n\t  \tprojectApi\r\n\t\t\t.getProjectList()\r\n\t\t\t.then(data => {\r\n\t\t\t\tif(!data || !data.length){\r\n\t\t\t\t\tdata = []\r\n\t\t\t\t}\r\n\t\t\t\tthis.setProjects(data);\r\n\t\t\t\tlocalStorage.setItem(\"projects\",JSON.stringify(data))\r\n\t\t\t\tif (data.length > 0) {\r\n\t\t\t\t\tlocalStorage.setItem(\"project\",JSON.stringify(data[0]))\r\n\t\t\t\t\tthis.setProject(data[0]);\r\n\t\t\t\t\t// this.getBuildList(data[0].id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlocalStorage.setItem(\"project\",'{}')\r\n\t\t\t\t\tthis.setProject({});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.$Message.error(\"获取项目列表失败\");\r\n\t\t\t});\r\n\t  },\r\n\t\t/**\r\n\t\t* \r\n\t\t* 获得参与的项目（包括自己创建的）\r\n\t\t* 并存入localStorage、更新vuex中的projects和project\r\n\t\t* 调用getBuildList方法\r\n\t\t*/\r\n\t  getJoinedList() {\r\n\t  \tprojectApi\r\n\t  \t\t.getJoinedList()\r\n\t  \t\t.then(data => {\r\n\t  \t\t\tthis.setProjects(data);\r\n\t  \t\t\tlocalStorage.setItem(\"projects\",JSON.stringify(data))\r\n\t  \t\t\tif (data.length > 0) {\r\n\t  \t\t\t\tlocalStorage.setItem(\"project\",JSON.stringify(data[0]))\r\n\t  \t\t\t\tthis.setProject(data[0]);\r\n\t  \t\t\t\t// this.getBuildList(data[0].id);\r\n\t  \t\t\t}\r\n\t  \t\t})\r\n\t  \t\t.catch(err => {\r\n\t  \t\t\tthis.$Message.error(\"获取项目列表失败\");\r\n\t  \t\t});\r\n\t  },\r\n\t\t/**\r\n\t\t * 传入项目id\r\n\t\t * 获得项目楼栋信息\r\n\t\t * 并存入localStorage、更新vuex中的buildings和builidng\r\n\t\t */\r\n\t  getBuildList(projectId) {\r\n\t\t\tconsole.log(\"getBuildList------\")\r\n\t  \tprojectApi.getBuildList({ projectId }).then(data => {\r\n\t\t\t\tconsole.log(\"---------getBuildList\")\r\n\t\t\t\tif(!data || !data.length){\r\n\t\t\t\t\tdata = []\r\n\t\t\t\t}\r\n\t  \t\tlocalStorage.setItem(\"buildings\",JSON.stringify(data))\r\n\t\t\t\tthis.setBuildings(data);\r\n\t\t\t\tif(data.length > 0){\r\n\t\t\t\t\tlocalStorage.setItem(\"building\",JSON.stringify(data[0]))\r\n\t\t\t\t\tthis.setBuilding(data[0]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlocalStorage.setItem(\"building\",'{}')\r\n\t\t\t\t\tthis.setBuilding({});\r\n\t\t\t\t}\r\n\t  \t});\r\n\t  },\r\n  },\n  created() {\n\t\tif(localStorage.getItem(\"isCanSeeAllProject\")){\r\n\t\t\tthis.setIsCanSeeAllProject(true)\r\n\t\t}\n  }\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=1&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('div',{staticClass:\"login-con\"},[_c('Card',{attrs:{\"icon\":\"log-in\",\"title\":\"欢迎登录\",\"bordered\":false}},[_c('span',{staticStyle:{\"font-size\":\"12px\"}},[_vm._v(\"使用360、搜狗、谷歌等浏览器访问体验最佳\")]),_c('div',{staticClass:\"form-con\"},[_c('login-form',{on:{\"on-success-valid\":_vm.handleSubmit}}),_c('p',{staticClass:\"login-tip\"},[_vm._v(\"厦门定风波科技有限公司提供技术支持\")])],1)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Form',{ref:\"loginForm\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules},nativeOn:{\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleSubmit($event)}}},[_c('FormItem',{attrs:{\"prop\":\"userName\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入用户名\"},model:{value:(_vm.form.userName),callback:function ($$v) {_vm.$set(_vm.form, \"userName\", $$v)},expression:\"form.userName\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_c('Icon',{attrs:{\"size\":16,\"type\":\"ios-person\"}})],1)])],1),_c('FormItem',{attrs:{\"prop\":\"password\"}},[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_c('Icon',{attrs:{\"size\":14,\"type\":\"md-lock\"}})],1)])],1),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\",\"long\":\"\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"登录\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Form ref=\"loginForm\" :model=\"form\" :rules=\"rules\" @keydown.enter.native=\"handleSubmit\">\n    <FormItem prop=\"userName\">\n      <Input v-model=\"form.userName\" placeholder=\"请输入用户名\">\n        <span slot=\"prepend\">\n          <Icon :size=\"16\" type=\"ios-person\"></Icon>\n        </span>\n      </Input>\n    </FormItem>\n    <FormItem prop=\"password\">\n      <Input type=\"password\" v-model=\"form.password\" placeholder=\"请输入密码\">\n        <span slot=\"prepend\">\n          <Icon :size=\"14\" type=\"md-lock\"></Icon>\n        </span>\n      </Input>\n    </FormItem>\n    <FormItem>\n      <Button @click=\"handleSubmit\" type=\"primary\" long>登录</Button>\n    </FormItem>\n  </Form>\n</template>\n<script>\nexport default {\n  name: 'LoginForm',\n  props: {\n    userNameRules: {\n      type: Array,\n      default: () => {\n        return [\n          { required: true, message: '账号不能为空', trigger: 'blur' }\n        ]\n      }\n    },\n    passwordRules: {\n      type: Array,\n      default: () => {\n        return [\n          { required: true, message: '密码不能为空', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  data () {\n    return {\n      form: {\n        userName: '',\n        password: ''\n      }\n    }\n  },\n  computed: {\n    rules () {\n      return {\n        userName: this.userNameRules,\n        password: this.passwordRules\n      }\n    }\n  },\n  methods: {\n    handleSubmit () {\n      this.$refs.loginForm.validate((valid) => {\n        if (valid) {\n          this.$emit('on-success-valid', {\n            userName: this.form.userName,\n            password: this.form.password\n          })\n        }\n      })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login-form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login-form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login-form.vue?vue&type=template&id=2263c0f4&\"\nimport script from \"./login-form.vue?vue&type=script&lang=js&\"\nexport * from \"./login-form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"login-form.vue\"\nexport default component.exports","import LoginForm from './login-form.vue'\nexport default LoginForm\n","<style lang=\"less\">\n@import \"./login.less\";\n</style>\n\n<template>\n  <div class=\"login\">\n    <div class=\"login-con\">\n      <Card icon=\"log-in\" title=\"欢迎登录\" :bordered=\"false\">\r\n\t\t\t\t<span style=\"font-size: 12px;\">使用360、搜狗、谷歌等浏览器访问体验最佳</span>\n        <div class=\"form-con\">\n          <login-form @on-success-valid=\"handleSubmit\"></login-form>\n          <p class=\"login-tip\">厦门定风波科技有限公司提供技术支持</p>\n        </div>\n      </Card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport LoginForm from \"_c/login-form\";\nimport { mapActions, mapMutations } from \"vuex\";\nimport userApi from '@/api/user-api'\r\nimport projectApi from '@/api/project-api'\r\nimport { getMenuByRouter } from '@/libs/util'\r\nimport MIXIN_project_building from \"@/mixin/mixin-project-building\";\r\nimport { machiningFromTwoTree, getTreeFromTreeByValue, getArrayFromTreeByValue } from '@/libs/mytools'\nexport default {\r\n\t\tmixins: [MIXIN_project_building],\n\t\tcomponents: {\n\t\t\t\tLoginForm\n\t\t},\n\t\tmethods: {\n\t\t\t\t...mapActions([\"handleLogin\", \"getUserInfo\"]),\r\n\t\t\t\t...mapMutations([\"setMenuList\", \"setButtonList\",\"setBuildings\",\r\n\t\t\t\t \"setRoles\", \"setProjects\", \"setProject\", \"setBuilding\", ]),\n\t\t\t\thandleSubmit({ userName, password }) {\r\n\t\t\t\t\t\tthis.handleLogin({ userName, password })\n\t\t\t\t\t\t.then(res => {//只是获得了token\n\t\t\t\t\t\t\t\tthis.$Message.success(\"登录成功\");\r\n\t\t\t\t\t\t\t\tthis.getUserInfo().then(ownerMenus => {\r\n\t\t\t\t\t\t\t\t\t\t//获得用户拥有的按钮数组\r\n\t\t\t\t\t\t\t\t\t\tlet buttonList = getArrayFromTreeByValue(JSON.parse(JSON.stringify(ownerMenus)), \"type\", 1);\r\n\t\t\t\t\t\t\t\t\t\tthis.setButtonList(buttonList);//保存到全局\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem(\"buttonList\",JSON.stringify(buttonList))\r\n\t\t\t\t\t\t\t\t\t\t// console.log(buttonList);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t// 把菜单中的按钮过滤掉\r\n\t\t\t\t\t\t\t\t\t\tlet originMenutree = getTreeFromTreeByValue(JSON.parse(JSON.stringify(ownerMenus)), \"type\", 0);\r\n\t\t\t\t\t\t\t\t\t\t//用本地的路由配置和服务端菜单树生成菜单树\r\n\t\t\t\t\t\t\t\t\t\toriginMenutree = machiningFromTwoTree(this.$router.options.routes, originMenutree)\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t//最后生成可以显示的菜单\r\n\t\t\t\t\t\t\t\t\t\tlet menutree = getMenuByRouter(originMenutree)\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem(\"menuList\",JSON.stringify(menutree))\r\n\t\t\t\t\t\t\t\t\t\tthis.setMenuList(menutree);\r\n\t\t\t\t\t\t\t\t\t\t//获得用户拥有的角色根据角色判断使用哪个获取项目列表的接口\r\n\t\t\t\t\t\t\t\t\t\t//并将角色、项目列表，当前项目，楼栋列表当前楼栋保存到本地防止刷新时丢失\r\n\t\t\t\t\t\t\t\t\t\tthis.getRoles();\r\n\t\t\t\t\t\t\t\t\t\t//显示首页\r\n\t\t\t\t\t\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\t\t\t\t\t\tname: \"home\"\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\tthis.$Message.error(err.message);\n\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t}\n};\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=66bf77f6&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=less&\"\nimport style1 from \"./login.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"login.vue\"\nexport default component.exports"],"sourceRoot":""}